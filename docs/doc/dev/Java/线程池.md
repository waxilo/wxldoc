## 7大参数

```java
public ThreadPoolExecutor( 
	int corePoolSize, // 核心线程数 
	int maximumPoolSize, // 最大线程数 
	long keepAliveTime, // 空闲线程存活时间 
	TimeUnit unit, // 时间单位 
	BlockingQueue<Runnable> workQueue, // 任务队列 
	ThreadFactory threadFactory, // 线程工厂 
	RejectedExecutionHandler handler // 拒绝策略 
)
```

## 执行流程

1. 新增任务，如果核心线程池未全部创建，不进入任务队列，创建线程直接执行；如果核心线程池已全部创建，进入任务队列。
2. 当队列已满，创建临时线程来消费任务；当临时线程空闲达到规定时间会被销毁。
3. 如果队列已满，触发拒绝策略。

## 任务队列
| 队列类型                    | 特点                         | 适用场景                              |
| ----------------------- | -------------------------- | --------------------------------- |
| `ArrayBlockingQueue`    | 有界队列（需指定容量）                | 控制内存，防止 OOM                       |
| `LinkedBlockingQueue`   | 无界队列（默认 Integer.MAX_VALUE） | 任务量平稳，但可能 OOM                     |
| `SynchronousQueue`      | 不存储任务，直接交给线程               | 高吞吐、快速响应（如 `newCachedThreadPool`） |
| `PriorityBlockingQueue` | 优先级队列                      | 任务有优先级                            |
## 拒绝策略
| 策略                    | 行为                              |
| --------------------- | ------------------------------- |
| `AbortPolicy`（默认）     | 抛出 `RejectedExecutionException` |
| `CallerRunsPolicy`    | 由提交任务的线程自己执行该任务（同步执行，降低提交速度）    |
| `DiscardPolicy`       | 静默丢弃任务，不抛异常                     |
| `DiscardOldestPolicy` | 丢弃队列中最老的任务，然后重试提交（可能再次失败）       |